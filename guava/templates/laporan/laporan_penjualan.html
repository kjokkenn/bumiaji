{% extends "base/base.html" %}

{% block content %}

<h1>Laporan Penjualan</h1>

<br>
<form class="form-sample" action="" method="get">
    <div class="form-row">
        <div class="form-group col-md-4">
            <label class="col-form-label">Tanggal Awal</label>
            <input class="form-control input-short" type="date" value="{{mulai}}" name="mulai">
        </div>
        <div class="form-group col-md-4">
            <label class="col-form-label">Tanggal Akhir</label>
            <input class="form-control input-short" type="date" value="{{akhir}}" name="akhir">
        </div>
        <div class="form-group col-md-4 align-self-end">
            <button type="submit" class="btn btn-success btn-icon-text">
                <i class="mdi mdi-file-check btn-icon-prepend"></i> Submit</button>
        </div>
    </div>
</form>

{% if detailobjlokal %}
<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>No</th>
                                <th>ID Penjualan</th>
                                <th>ID Pasar</th>
                                <th>Tanggal</th>
                                <th>Nama Komoditas</th>
                                <th>Harga Komoditas</th>
                                <th>Jumlah Komoditas</th>
                                <th>Nama Produk</th>
                                <th>Harga Produk</th>
                                <th>Jumlah Produk</th>
                                <th>Subtotal</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        {% for item in detailobjlokal %}
                        <tbody class="table-dark">
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{item.0.id_penjualan}}</td>
                                <td>{{item.0.id_pasar}}</td>
                                <td>{{item.0.tanggal}}</td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.id_komoditas == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>{{detail.id_komoditas}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.id_komoditas.harga_beli == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>Rp{{detail.id_komoditas.harga_beli}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.kuantitas_komoditas == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>{{detail.kuantitas_komoditas}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.id_produk == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>{{detail.id_produk}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.id_produk.harga_produk == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>Rp{{detail.id_produk.harga_produk}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.1 %}
                                        {% if detail.kuantitas_produk == None %}
                                        <h6>-</h6>
                                        {% else %}
                                        <h6>{{detail.kuantitas_produk}}</h6>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td>
                                    {% for detail in item.2 %}
                                        <h6>Rp{{detail}}</h6>
                                    {% endfor %}
                                </td>
                                <td>Rp{{item.3}}</td>
                            </tr>
                        </tbody>
                        {% endfor %}
                        <tfoot class="table-dark">
                            <tr class="table-success">
                                <th colspan="11" style="text-align:center;">Grand Total</th>
                                <th>Rp{{grandtotallokal}}</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
